# 🚀 Public IP checker

> [!NOTE]
> This example shows your public IP address

This project demonstrates how to build a **static Hugo site** enhanced with **Netlify serverless functions**, using `netlify dev` for a seamless local development experience.

## 📂 Project structure

```
.
├── netlify.toml
├── netlify/
│   └── functions/
│       └── get-ip.js
├── content/
├── layouts/
├── static/
├── config.toml
└── ...
```

* `netlify/functions/get-ip.js` — example serverless function to fetch client IP.
* `netlify.toml` — configures Netlify build and functions.
* `public/` — generated by Hugo.

---

## 🚀 Local development

### 🔧 Requirements

* [Hugo](https://gohugo.io/getting-started/installing/)
* [Node.js](https://nodejs.org)
* [Netlify CLI](https://docs.netlify.com/cli/get-started/)

Install Netlify CLI globally:

```bash
npm install -g netlify-cli
```

---

### 🏗 Running locally

Run everything with:

```bash
netlify dev
```

This will:

* build your Hugo site,
* serve it on `http://localhost:8888`,
* and route `/.netlify/functions/*` to your local functions.

✅ Try it out by opening:

```
http://localhost:8888/.netlify/functions/get-ip
```

or watch it appear in your Hugo page if you included the JavaScript fetch.

---

## 📝 Example serverless function

**`netlify/functions/get-ip.js`**

```javascript
exports.handler = async (event, context) => {
  const xff = event.headers['x-forwarded-for'];
  const ip = xff ? xff.split(',')[0].trim() : 'IP not found';

  return {
    statusCode: 200,
    body: JSON.stringify({ ip })
  };
};
```

You can call this from your Hugo-generated pages using JavaScript:

```html
<script>
fetch('/.netlify/functions/get-ip')
  .then(res => res.json())
  .then(data => {
    document.body.innerHTML += `<p>Your IP: ${data.ip}</p>`;
  });
</script>
```

---

## 🚀 Deploying to Netlify

### 📤 One-time setup

If you haven’t linked the project yet:

```bash
netlify init
```

Then to deploy:

```bash
netlify deploy --build
```

Follow the prompts to pick a site or create a new one.

---

## 🔧 Config: `netlify.toml`

```toml
[build]
  publish = "public"
  command = "hugo"

[dev]
  functions = "netlify/functions"
  framework = "#custom"
```

This tells Netlify to:

* build your site with `hugo`,
* publish the output in `public/`,
* find your functions in `netlify/functions`,
* and use your local server (not auto-detect).

---

## ❤️ Credits

* [Hugo](https://gohugo.io) — the fast static site generator.
* [Netlify](https://www.netlify.com) — for free static hosting + functions + deploys.
* Inspired by typical JAMstack patterns.

